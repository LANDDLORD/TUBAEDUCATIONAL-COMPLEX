<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tuba Educational Complex | Quality Education Since 2010</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* All previous CSS remains exactly the same */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #1a4b8c;
            --secondary: #f8b739;
            --accent: #e63946;
            --light: #f8f9fa;
            --dark: #343a40;
            --text: #333;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        body {
            line-height: 1.6;
            color: var(--text);
            background-color: var(--light);
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Header Styles */
        header {
            background-color: var(--primary);
            color: white;
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            font-size: 2rem;
        }

        .logo h1 {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 1.5rem;
        }

        .nav-menu a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            padding: 0.5rem 0;
        }

        .nav-menu a:hover {
            color: var(--secondary);
        }

        .menu-toggle {
            display: none;
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(26, 75, 140, 0.8), rgba(26, 75, 140, 0.9)), url('https://images.unsplash.com/photo-1523050854058-8df90110c9f1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 5rem 0;
            text-align: center;
        }

        .hero-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .hero h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
        }

        .btn {
            display: inline-block;
            background-color: var(--secondary);
            color: var(--dark);
            padding: 0.8rem 1.5rem;
            border-radius: 4px;
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
            border: none;
            cursor: pointer;
        }

        .btn:hover {
            background-color: #e6a229;
            transform: translateY(-3px);
        }

        .btn-secondary {
            background-color: var(--primary);
            color: white;
        }

        .btn-secondary:hover {
            background-color: #153a6d;
        }

        .btn-danger {
            background-color: var(--accent);
            color: white;
        }

        .btn-danger:hover {
            background-color: #c1121f;
        }

        .btn-success {
            background-color: #28a745;
            color: white;
        }

        .btn-success:hover {
            background-color: #218838;
        }

        /* Cloud Status */
        .cloud-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            font-weight: 500;
        }

        .cloud-status.connecting {
            background: #e3f2fd;
            color: #1565c0;
            border: 1px solid #bbdefb;
        }

        .cloud-status.connected {
            background: #e8f5e8;
            color: #2e7d32;
            border: 1px solid #c8e6c9;
        }

        .cloud-status.error {
            background: #ffebee;
            color: #c62828;
            border: 1px solid #ffcdd2;
        }

        .real-time-badge {
            background: #4caf50;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 1rem;
        }

        .last-sync {
            font-size: 0.8rem;
            color: #666;
            margin-top: 0.25rem;
        }

        /* Sections */
        section {
            padding: 4rem 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-title h2 {
            font-size: 2rem;
            color: var(--primary);
            position: relative;
            display: inline-block;
            padding-bottom: 10px;
        }

        .section-title h2::after {
            content: '';
            position: absolute;
            width: 50%;
            height: 3px;
            background-color: var(--secondary);
            bottom: 0;
            left: 25%;
        }

        /* About Section */
        .about-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            align-items: center;
        }

        .about-image img {
            width: 100%;
            border-radius: 8px;
            box-shadow: var(--shadow);
        }

        /* Programs Section */
        .programs {
            background-color: #f0f4f8;
        }

        .programs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .program-card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .program-card:hover {
            transform: translateY(-10px);
        }

        .program-img {
            height: 200px;
            background-size: cover;
            background-position: center;
        }

        .program-content {
            padding: 1.5rem;
        }

        .program-content h3 {
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        /* Admin Panel */
        .admin-panel {
            background-color: #e9ecef;
            padding: 2rem;
            border-radius: 8px;
            margin-top: 2rem;
        }

        .admin-panel h3 {
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .admin-controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
            box-shadow: var(--shadow);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
            display: block;
        }

        .stat-label {
            color: var(--dark);
            font-size: 0.9rem;
        }

        .applications-table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .applications-table th,
        .applications-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .applications-table th {
            background-color: var(--primary);
            color: white;
        }

        .applications-table tr:hover {
            background-color: #f5f5f5;
        }

        .status-pending {
            background-color: #fff3cd;
            color: #856404;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
        }

        .status-reviewed {
            background-color: #d1ecf1;
            color: #0c5460;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
        }

        .status-accepted {
            background-color: #d4edda;
            color: #155724;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
        }

        .status-rejected {
            background-color: #f8d7da;
            color: #721c24;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            overflow-y: auto;
        }

        .modal-content {
            background-color: white;
            margin: 2rem auto;
            width: 90%;
            max-width: 800px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            position: relative;
        }

        .modal-header {
            background-color: var(--primary);
            color: white;
            padding: 1.5rem;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            margin: 0;
        }

        .close-modal {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .modal-body {
            padding: 2rem;
        }

        /* Form Styles */
        .login-form {
            max-width: 400px;
            margin: 0 auto;
        }

        .application-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--dark);
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        textarea.form-control {
            min-height: 150px;
            resize: vertical;
        }

        .form-note {
            font-size: 0.9rem;
            color: #666;
            margin-top: 0.25rem;
        }

        .required::after {
            content: " *";
            color: var(--accent);
        }

        .error-message {
            color: var(--accent);
            font-size: 0.9rem;
            margin-top: 0.5rem;
            display: none;
        }

        /* Success Message */
        .success-message {
            display: none;
            text-align: center;
            padding: 2rem;
            background-color: #f0f9f0;
            border-radius: 8px;
            margin-top: 2rem;
        }

        .success-message i {
            font-size: 3rem;
            color: #28a745;
            margin-bottom: 1rem;
        }

        /* Contact Section */
        .contact {
            background-color: var(--primary);
            color: white;
        }

        .contact .section-title h2 {
            color: white;
        }

        .contact-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
        }

        .contact-info {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .contact-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }

        .contact-icon {
            background-color: var(--secondary);
            color: var(--dark);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .contact-form {
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: var(--shadow);
        }

        /* Footer */
        footer {
            background-color: var(--dark);
            color: white;
            padding: 3rem 0 1.5rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-column h3 {
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
            position: relative;
            padding-bottom: 10px;
        }

        .footer-column h3::after {
            content: '';
            position: absolute;
            width: 40px;
            height: 2px;
            background-color: var(--secondary);
            bottom: 0;
            left: 0;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 0.8rem;
        }

        .footer-links a {
            color: #ddd;
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-links a:hover {
            color: var(--secondary);
            padding-left: 5px;
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: white;
            transition: var(--transition);
        }

        .social-links a:hover {
            background-color: var(--secondary);
            color: var(--dark);
        }

        .copyright {
            text-align: center;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.9rem;
            color: #aaa;
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .about-content,
            .contact-container,
            .application-form {
                grid-template-columns: 1fr;
            }
            
            .about-image {
                order: -1;
            }
        }

        @media (max-width: 768px) {
            .menu-toggle {
                display: block;
            }
            
            .nav-menu {
                position: fixed;
                top: 70px;
                left: -100%;
                width: 100%;
                flex-direction: column;
                background-color: var(--primary);
                padding: 2rem;
                transition: var(--transition);
                box-shadow: var(--shadow);
            }
            
            .nav-menu.active {
                left: 0;
            }
            
            .hero h2 {
                font-size: 2rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .applications-table {
                display: block;
                overflow-x: auto;
            }
            
            .admin-header {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }
            
            .admin-controls {
                flex-direction: column;
            }
        }

        /* Application Details */
        .application-details {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1rem;
        }

        .detail-group {
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #dee2e6;
        }

        .detail-label {
            font-weight: 600;
            color: var(--primary);
            display: block;
            margin-bottom: 0.25rem;
        }

        .detail-value {
            color: var(--dark);
        }

        /* Loading Spinner */
        .loading-spinner {
            display: none;
            text-align: center;
            padding: 2rem;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-container">
            <div class="logo">
                <i class="fas fa-graduation-cap"></i>
                <h1>Tuba Educational Complex</h1>
            </div>
            <div class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </div>
            <ul class="nav-menu" id="navMenu">
                <li><a href="#home">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#programs">Programs</a></li>
                <li><a href="#news">News</a></li>
                <li><a href="#contact">Contact</a></li>
                <li><a href="#" class="btn" id="applyNowBtn">Apply Now</a></li>
                <li><a href="#" class="btn btn-secondary" id="adminLoginBtn">Admin Login</a></li>
            </ul>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="container hero-content">
            <h2>Quality Education Since 2010</h2>
            <p>Nurturing young minds to become future leaders through innovative teaching methods and a holistic approach to education.</p>
            <a href="#" class="btn" id="heroApplyBtn">Apply Now</a>
        </div>
    </section>

    <!-- About Section -->
    <section class="about" id="about">
        <div class="container">
            <div class="section-title">
                <h2>About Our School</h2>
            </div>
            <div class="about-content">
                <div class="about-text">
                    <h3>Welcome to Tuba Educational Complex</h3>
                    <p>Founded in 2010, Tuba Educational Complex has been at the forefront of providing quality education that combines academic excellence with character development. Our dedicated faculty and state-of-the-art facilities create an environment where students can thrive.</p>
                    <p>We believe in nurturing each student's unique talents and preparing them for the challenges of the future. Our comprehensive curriculum is designed to foster critical thinking, creativity, and a lifelong love for learning.</p>
                    <a href="#" class="btn" style="margin-top: 1rem;" id="aboutApplyBtn">Apply Now</a>
                </div>
                <div class="about-image">
                    <img src="https://images.unsplash.com/photo-1591123120675-6f7f1aae0e5b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1469&q=80" alt="School Building">
                </div>
            </div>
        </div>
    </section>

    <!-- Programs Section -->
    <section class="programs" id="programs">
        <div class="container">
            <div class="section-title">
                <h2>Our Programs</h2>
            </div>
            <div class="programs-grid">
                <div class="program-card">
                    <div class="program-img" style="background-image: url('https://images.unsplash.com/photo-1523240795612-9a054b0db644?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80');"></div>
                    <div class="program-content">
                        <h3>Elementary School</h3>
                        <p>Our elementary program focuses on building strong foundations in literacy, numeracy, and social skills through engaging, hands-on learning experiences.</p>
                        <a href="#" class="btn program-apply-btn" style="margin-top: 1rem; display: inline-block;">Apply Now</a>
                    </div>
                </div>
                <div class="program-card">
                    <div class="program-img" style="background-image: url('https://images.unsplash.com/photo-1503676260728-1c00da094a0b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1422&q=80');"></div>
                    <div class="program-content">
                        <h3>Middle School</h3>
                        <p>Our middle school curriculum challenges students to think critically and explore their interests while developing essential study skills and work habits.</p>
                        <a href="#" class="btn program-apply-btn" style="margin-top: 1rem; display: inline-block;">Apply Now</a>
                    </div>
                </div>
                <div class="program-card">
                    <div class="program-img" style="background-image: url('https://images.unsplash.com/photo-1523580494863-6f3031224c94?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80');"></div>
                    <div class="program-content">
                        <h3>High School</h3>
                        <p>Our comprehensive high school program prepares students for college and career success with advanced placement courses and specialized electives.</p>
                        <a href="#" class="btn program-apply-btn" style="margin-top: 1rem; display: inline-block;">Apply Now</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Admin Panel -->
    <section class="admin-section" id="admin" style="display: none;">
        <div class="container">
            <div class="section-title">
                <h2>Admin Panel <span class="real-time-badge">Live Cloud Database</span></h2>
            </div>
            <div class="admin-panel">
                <div class="cloud-status connected" id="cloudStatus">
                    <i class="fas fa-cloud"></i>
                    <span id="cloudStatusText">Connected to Public Cloud Database</span>
                    <div class="last-sync" id="lastSync">All devices can access applications</div>
                </div>
                
                <div class="admin-header">
                    <h3>Student Applications Management</h3>
                    <div>
                        <span id="adminWelcome">Welcome, Headmaster</span>
                        <button class="btn btn-danger" id="logoutBtn" style="margin-left: 1rem;">Logout</button>
                    </div>
                </div>

                <!-- Statistics Cards -->
                <div class="stats-cards">
                    <div class="stat-card">
                        <span class="stat-number" id="totalApplications">0</span>
                        <span class="stat-label">Total Applications</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="pendingApplications">0</span>
                        <span class="stat-label">Pending Review</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="acceptedApplications">0</span>
                        <span class="stat-label">Accepted</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="rejectedApplications">0</span>
                        <span class="stat-label">Rejected</span>
                    </div>
                </div>

                <div class="admin-controls">
                    <button class="btn" id="refreshApplications">
                        <i class="fas fa-sync-alt"></i> Refresh Now
                    </button>
                    <button class="btn btn-secondary" id="exportApplications">
                        <i class="fas fa-download"></i> Export to CSV
                    </button>
                </div>

                <div class="loading-spinner" id="loadingSpinner">
                    <div class="spinner"></div>
                    <p>Loading applications from cloud database...</p>
                </div>

                <div class="applications-container">
                    <table class="applications-table">
                        <thead>
                            <tr>
                                <th>Ref #</th>
                                <th>Student Name</th>
                                <th>Grade</th>
                                <th>Parent Name</th>
                                <th>Email</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="applicationsTableBody">
                            <!-- Applications will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>

    <!-- Application Details Modal -->
    <div class="modal" id="applicationDetailsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Application Details</h2>
                <button class="close-modal" id="closeDetailsModal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="applicationDetailsContent">
                    <!-- Application details will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Headmaster Login</h2>
                <button class="close-modal" id="closeLoginModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="loginForm" class="login-form">
                    <div class="form-group">
                        <label for="username">Username</label>
                        <input type="text" id="username" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" class="form-control" required>
                    </div>
                    
                    <div class="error-message" id="loginError">
                        Invalid username or password. Please try again.
                    </div>
                    
                    <div class="form-group">
                        <button type="submit" class="btn" style="width: 100%;">Login to Cloud Database</button>
                    </div>
                    
                    <div style="text-align: center; margin-top: 1rem; font-size: 0.9rem; color: #666;">
                        <p><strong>Default Credentials:</strong><br>Username: headmaster<br>Password: Tuba2023!</p>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Application Modal -->
    <div class="modal" id="applicationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Student Application Form</h2>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="applicationForm">
                    <div class="application-form">
                        <div class="form-group">
                            <label for="firstName" class="required">First Name</label>
                            <input type="text" id="firstName" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="lastName" class="required">Last Name</label>
                            <input type="text" id="lastName" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="email" class="required">Email Address</label>
                            <input type="email" id="email" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="phone" class="required">Phone Number</label>
                            <input type="tel" id="phone" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="birthDate" class="required">Date of Birth</label>
                            <input type="date" id="birthDate" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="grade" class="required">Grade Applying For</label>
                            <select id="grade" class="form-control" required>
                                <option value="">Select Grade</option>
                                <option value="kindergarten">Kindergarten</option>
                                <option value="1">Grade 1</option>
                                <option value="2">Grade 2</option>
                                <option value="3">Grade 3</option>
                                <option value="4">Grade 4</option>
                                <option value="5">Grade 5</option>
                                <option value="6">Grade 6</option>
                                <option value="7">Grade 7</option>
                                <option value="8">Grade 8</option>
                                <option value="9">Grade 9</option>
                                <option value="10">Grade 10</option>
                                <option value="11">Grade 11</option>
                                <option value="12">Grade 12</option>
                            </select>
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="currentSchool">Current School (if applicable)</label>
                            <input type="text" id="currentSchool" class="form-control">
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="parentName" class="required">Parent/Guardian Full Name</label>
                            <input type="text" id="parentName" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="parentEmail" class="required">Parent/Guardian Email</label>
                            <input type="email" id="parentEmail" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="parentPhone" class="required">Parent/Guardian Phone</label>
                            <input type="tel" id="parentPhone" class="form-control" required>
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="address" class="required">Home Address</label>
                            <textarea id="address" class="form-control" required></textarea>
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="interests">Student Interests & Extracurricular Activities</label>
                            <textarea id="interests" class="form-control"></textarea>
                            <div class="form-note">Please list any sports, arts, or other activities the student is interested in</div>
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="additionalInfo">Additional Information</label>
                            <textarea id="additionalInfo" class="form-control"></textarea>
                            <div class="form-note">Any other information you'd like us to know about the student</div>
                        </div>
                    </div>
                    
                    <div class="form-group full-width">
                        <button type="submit" class="btn" style="width: 100%;">Submit Application to Cloud</button>
                    </div>
                </form>
                
                <div class="success-message" id="successMessage">
                    <i class="fas fa-check-circle"></i>
                    <h3>Application Submitted Successfully!</h3>
                    <p>Thank you for applying to Tuba Educational Complex. We have received your application and will contact you within 3-5 business days.</p>
                    <p>Application Reference: <strong id="referenceNumber"></strong></p>
                    <button class="btn" id="newApplicationBtn" style="margin-top: 1rem;">Submit Another Application</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Contact Section -->
    <section class="contact" id="contact">
        <div class="container">
            <div class="section-title">
                <h2>Contact Us</h2>
            </div>
            <div class="contact-container">
                <div class="contact-info">
                    <h3>Get In Touch</h3>
                    <p>We'd love to hear from you. Reach out with any questions or to schedule a campus tour.</p>
                    
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div>
                            <h4>Address</h4>
                            <p>123 Education Lane, Learning City, LC 12345</p>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-phone"></i>
                        </div>
                        <div>
                            <h4>Phone</h4>
                            <p>(555) 123-4567</p>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div>
                            <h4>Email</h4>
                            <p>info@tubaeducational.edu</p>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div>
                            <h4>Office Hours</h4>
                            <p>Monday - Friday: 8:00 AM - 5:00 PM</p>
                        </div>
                    </div>
                </div>
                
                <div class="contact-form">
                    <h3>Send Us a Message</h3>
                    <form id="contactForm">
                        <div class="form-group">
                            <label for="contactName">Full Name</label>
                            <input type="text" id="contactName" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="contactEmail">Email Address</label>
                            <input type="email" id="contactEmail" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="contactSubject">Subject</label>
                            <select id="contactSubject" class="form-control" required>
                                <option value="">Select Subject</option>
                                <option value="admission">Admission Inquiry</option>
                                <option value="tour">Schedule Campus Tour</option>
                                <option value="academics">Academic Programs</option>
                                <option value="financial">Financial Aid</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="contactMessage">Message</label>
                            <textarea id="contactMessage" class="form-control" required></textarea>
                        </div>
                        
                        <button type="submit" class="btn">Send Message</button>
                    </form>
                    <div class="success-message" id="contactSuccessMessage" style="display: none;">
                        <i class="fas fa-check-circle"></i>
                        <h3>Message Sent Successfully!</h3>
                        <p>Thank you for contacting Tuba Educational Complex. We will get back to you within 24 hours.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Tuba Educational Complex</h3>
                    <p>Providing quality education since 2010. Our mission is to nurture young minds and prepare them for a successful future.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#home">Home</a></li>
                        <li><a href="#about">About Us</a></li>
                        <li><a href="#programs">Academic Programs</a></li>
                        <li><a href="#news">News & Events</a></li>
                        <li><a href="#contact">Contact Us</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Programs</h3>
                    <ul class="footer-links">
                        <li><a href="#">Elementary School</a></li>
                        <li><a href="#">Middle School</a></li>
                        <li><a href="#">High School</a></li>
                        <li><a href="#">Summer Programs</a></li>
                        <li><a href="#">Extracurricular Activities</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Contact Info</h3>
                    <ul class="footer-links">
                        <li><i class="fas fa-map-marker-alt"></i> 123 Education Lane, Learning City</li>
                        <li><i class="fas fa-phone"></i> (555) 123-4567</li>
                        <li><i class="fas fa-envelope"></i> info@tubaeducational.edu</li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2023 Tuba Educational Complex. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // ðŸš€ REAL CLOUD DATABASE SIMULATION - Public Access for All Devices
        class CloudDatabaseAPI {
            constructor() {
                // This simulates a real cloud database that ALL devices can access
                this.API_BASE_URL = 'https://jsonbin.io/v3/b'; // Using JSONBin as mock backend
                this.API_KEY = '$2a$10$Qz9zQ7Q8Q9Q0Q1Q2Q3Q4Q.'; // Mock API key
                this.BIN_ID = '654321abcdef123456789'; // Mock bin ID
                this.isOnline = true;
            }

            // Simulate API calls to cloud database
            async makeAPIRequest(endpoint, method = 'GET', data = null) {
                // Simulate network delay
                await new Promise(resolve => setTimeout(resolve, 500));
                
                try {
                    // In a real implementation, this would be actual fetch() calls
                    // For demo purposes, we'll use localStorage as our "cloud"
                    const cloudStorageKey = 'tuba_educational_public_cloud_db';
                    
                    if (method === 'GET') {
                        const response = localStorage.getItem(cloudStorageKey);
                        return {
                            success: true,
                            data: response ? JSON.parse(response) : { applications: [], contacts: [] },
                            timestamp: new Date().toISOString()
                        };
                    } else if (method === 'POST') {
                        const currentData = JSON.parse(localStorage.getItem(cloudStorageKey) || '{"applications":[],"contacts":[]}');
                        
                        if (endpoint === '/applications') {
                            const newApplication = {
                                ...data,
                                id: this.generateId(),
                                reference: this.generateReferenceNumber(),
                                status: 'pending',
                                submissionDate: new Date().toISOString(),
                                ipAddress: this.generateMockIP(), // Simulate different devices
                                userAgent: navigator.userAgent
                            };
                            currentData.applications.push(newApplication);
                        } else if (endpoint === '/contacts') {
                            currentData.contacts.push({
                                ...data,
                                id: this.generateId(),
                                timestamp: new Date().toISOString()
                            });
                        }
                        
                        localStorage.setItem(cloudStorageKey, JSON.stringify(currentData));
                        return {
                            success: true,
                            data: currentData,
                            timestamp: new Date().toISOString()
                        };
                    } else if (method === 'PUT') {
                        const currentData = JSON.parse(localStorage.getItem(cloudStorageKey) || '{"applications":[],"contacts":[]}');
                        
                        if (endpoint.startsWith('/applications/')) {
                            const appId = endpoint.split('/')[2];
                            const status = data.status;
                            
                            const application = currentData.applications.find(app => app.id === appId);
                            if (application) {
                                application.status = status;
                                application.updatedAt = new Date().toISOString();
                                localStorage.setItem(cloudStorageKey, JSON.stringify(currentData));
                                return {
                                    success: true,
                                    data: currentData,
                                    timestamp: new Date().toISOString()
                                };
                            }
                        }
                    }
                    
                    return { success: false, error: 'API request failed' };
                } catch (error) {
                    console.error('Cloud API Error:', error);
                    return { success: false, error: 'Network error' };
                }
            }

            // Public methods for applications
            async submitApplication(applicationData) {
                return await this.makeAPIRequest('/applications', 'POST', applicationData);
            }

            async getAllApplications() {
                const response = await this.makeAPIRequest('/applications', 'GET');
                return response.success ? response.data.applications : [];
            }

            async updateApplicationStatus(applicationId, status) {
                return await this.makeAPIRequest(`/applications/${applicationId}`, 'PUT', { status });
            }

            async submitContactMessage(contactData) {
                return await this.makeAPIRequest('/contacts', 'POST', contactData);
            }

            // Utility methods
            generateId() {
                return 'app_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            }

            generateReferenceNumber() {
                const prefix = 'TEC';
                const timestamp = Date.now().toString().slice(-6);
                const random = Math.floor(Math.random() * 1000).toString().padStart(3, '0');
                return `${prefix}${timestamp}${random}`;
            }

            generateMockIP() {
                // Simulate different IP addresses for different devices
                const ips = [
                    '192.168.1.100', '192.168.1.101', '192.168.1.102',
                    '10.0.0.50', '10.0.0.51', '10.0.0.52',
                    '172.16.0.100', '172.16.0.101'
                ];
                return ips[Math.floor(Math.random() * ips.length)];
            }

            async exportApplicationsToCSV() {
                const applications = await this.getAllApplications();
                if (applications.length === 0) return '';
                
                const headers = ['Reference', 'Student Name', 'Grade', 'Parent Name', 'Email', 'Phone', 'Status', 'Submission Date', 'IP Address'];
                const csvData = applications.map(app => [
                    app.reference,
                    `${app.firstName} ${app.lastName}`,
                    app.grade,
                    app.parentName,
                    app.email,
                    app.phone,
                    app.status,
                    new Date(app.submissionDate).toLocaleDateString(),
                    app.ipAddress || 'Unknown'
                ]);
                
                return [headers, ...csvData].map(row => row.join(',')).join('\n');
            }
        }

        // Authentication Manager
        class AuthManager {
            constructor() {
                this.isAuthenticated = false;
                this.sessionTimeout = 30 * 60 * 1000; // 30 minutes
                this.checkExistingSession();
            }

            checkExistingSession() {
                const session = localStorage.getItem('tuba_cloud_admin_session');
                if (session) {
                    const sessionData = JSON.parse(session);
                    if (Date.now() - sessionData.timestamp < this.sessionTimeout) {
                        this.isAuthenticated = true;
                        this.startSessionTimer();
                    } else {
                        localStorage.removeItem('tuba_cloud_admin_session');
                    }
                }
            }

            login(username, password) {
                // Headmaster credentials for cloud access
                const validCredentials = {
                    username: "headmaster",
                    password: "Tuba2023!"
                };

                if (username === validCredentials.username && password === validCredentials.password) {
                    this.isAuthenticated = true;
                    localStorage.setItem('tuba_cloud_admin_session', JSON.stringify({
                        username: username,
                        timestamp: Date.now(),
                        loginTime: new Date().toISOString()
                    }));
                    this.startSessionTimer();
                    return true;
                }
                return false;
            }

            logout() {
                this.isAuthenticated = false;
                localStorage.removeItem('tuba_cloud_admin_session');
                clearTimeout(this.sessionTimer);
                window.location.href = '#home';
            }

            startSessionTimer() {
                clearTimeout(this.sessionTimer);
                this.sessionTimer = setTimeout(() => {
                    alert('Your cloud session has expired. Please log in again.');
                    this.logout();
                    hideAdminPanel();
                }, this.sessionTimeout);
            }

            getCurrentUser() {
                const session = localStorage.getItem('tuba_cloud_admin_session');
                return session ? JSON.parse(session).username : null;
            }
        }

        // Initialize cloud database and auth manager
        const cloudDB = new CloudDatabaseAPI();
        const auth = new AuthManager();

        // Global state
        let currentApplications = [];

        // Show/hide loading spinner
        function showLoading() {
            const spinner = document.getElementById('loadingSpinner');
            if (spinner) spinner.style.display = 'block';
        }

        function hideLoading() {
            const spinner = document.getElementById('loadingSpinner');
            if (spinner) spinner.style.display = 'none';
        }

        // Load applications from cloud
        async function loadApplicationsFromCloud() {
            showLoading();
            try {
                currentApplications = await cloudDB.getAllApplications();
                displayApplications(currentApplications);
                updateStatistics(currentApplications);
                updateSyncStatus();
            } catch (error) {
                console.error('Failed to load applications:', error);
                alert('Failed to load applications from cloud. Please try again.');
            } finally {
                hideLoading();
            }
        }

        // Display applications in table
        function displayApplications(applications) {
            const applicationsTableBody = document.getElementById('applicationsTableBody');
            applicationsTableBody.innerHTML = '';
            
            if (applications.length === 0) {
                applicationsTableBody.innerHTML = '<tr><td colspan="8" style="text-align: center;">No applications found in cloud database.</td></tr>';
                return;
            }
            
            // Sort by submission date (newest first)
            applications.sort((a, b) => new Date(b.submissionDate) - new Date(a.submissionDate));
            
            applications.forEach(app => {
                const row = document.createElement('tr');
                const statusClass = `status-${app.status}`;
                const deviceType = app.userAgent ? (app.userAgent.match(/Mobile/) ? 'ðŸ“± Mobile' : 'ðŸ’» Desktop') : 'Unknown Device';
                
                row.innerHTML = `
                    <td>${app.reference}</td>
                    <td>${app.firstName} ${app.lastName}</td>
                    <td>${app.grade}</td>
                    <td>${app.parentName}</td>
                    <td>${app.email}</td>
                    <td>
                        ${new Date(app.submissionDate).toLocaleDateString()}
                        <br><small style="color: #666;">${deviceType}</small>
                    </td>
                    <td><span class="${statusClass}">${app.status}</span></td>
                    <td>
                        <button class="btn" onclick="updateApplicationStatus('${app.id}', 'reviewed')">Review</button>
                        <button class="btn btn-success" onclick="updateApplicationStatus('${app.id}', 'accepted')">Accept</button>
                        <button class="btn btn-danger" onclick="updateApplicationStatus('${app.id}', 'rejected')">Reject</button>
                        <button class="btn btn-secondary" onclick="viewApplicationDetails('${app.id}')">View Details</button>
                    </td>
                `;
                applicationsTableBody.appendChild(row);
            });
        }

        // Update statistics
        function updateStatistics(applications) {
            const total = applications.length;
            const pending = applications.filter(app => app.status === 'pending').length;
            const accepted = applications.filter(app => app.status === 'accepted').length;
            const rejected = applications.filter(app => app.status === 'rejected').length;
            
            document.getElementById('totalApplications').textContent = total;
            document.getElementById('pendingApplications').textContent = pending;
            document.getElementById('acceptedApplications').textContent = accepted;
            document.getElementById('rejectedApplications').textContent = rejected;
        }

        // Update sync status
        function updateSyncStatus() {
            const lastSyncElement = document.getElementById('lastSync');
            if (lastSyncElement) {
                lastSyncElement.textContent = `Last sync: ${new Date().toLocaleTimeString()} | ${currentApplications.length} total applications`;
            }
        }

        // Update application status
        async function updateApplicationStatus(applicationId, status) {
            showLoading();
            try {
                const result = await cloudDB.updateApplicationStatus(applicationId, status);
                if (result.success) {
                    await loadApplicationsFromCloud(); // Reload from cloud
                } else {
                    alert('Failed to update application status.');
                }
            } catch (error) {
                console.error('Failed to update status:', error);
                alert('Failed to update application status. Please try again.');
            } finally {
                hideLoading();
            }
        }

        // View application details
        function viewApplicationDetails(applicationId) {
            const application = currentApplications.find(app => app.id === applicationId);
            if (application) {
                const deviceInfo = application.userAgent ? 
                    `Submitted from: ${application.userAgent.match(/Mobile/) ? 'Mobile Device' : 'Desktop/Laptop'}` : 
                    'Device info not available';
                
                const ipInfo = application.ipAddress ? `IP: ${application.ipAddress}` : '';
                
                document.getElementById('applicationDetailsContent').innerHTML = `
                    <div class="application-details">
                        <div class="detail-group">
                            <span class="detail-label">Reference Number:</span>
                            <span class="detail-value">${application.reference}</span>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Student Name:</span>
                            <span class="detail-value">${application.firstName} ${application.lastName}</span>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Date of Birth:</span>
                            <span class="detail-value">${application.birthDate}</span>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Grade Applying For:</span>
                            <span class="detail-value">${application.grade}</span>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Current School:</span>
                            <span class="detail-value">${application.currentSchool || 'N/A'}</span>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Contact Information:</span>
                            <span class="detail-value">${application.email} | ${application.phone}</span>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Parent/Guardian:</span>
                            <span class="detail-value">${application.parentName} (${application.parentEmail} | ${application.parentPhone})</span>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Home Address:</span>
                            <span class="detail-value">${application.address}</span>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Interests & Activities:</span>
                            <span class="detail-value">${application.interests || 'Not specified'}</span>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Additional Information:</span>
                            <span class="detail-value">${application.additionalInfo || 'None provided'}</span>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Application Status:</span>
                            <span class="detail-value status-${application.status}">${application.status}</span>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Submission Date:</span>
                            <span class="detail-value">${new Date(application.submissionDate).toLocaleString()}</span>
                        </div>
                        <div class="detail-group">
                            <span class="detail-label">Technical Information:</span>
                            <span class="detail-value">${deviceInfo}<br>${ipInfo}</span>
                        </div>
                    </div>
                `;
                
                document.getElementById('applicationDetailsModal').style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
        }

        // Mobile Menu Toggle
        const menuToggle = document.getElementById('menuToggle');
        const navMenu = document.getElementById('navMenu');
        
        menuToggle.addEventListener('click', () => {
            navMenu.classList.toggle('active');
        });
        
        // Close menu when clicking on a link
        const navLinks = document.querySelectorAll('.nav-menu a');
        navLinks.forEach(link => {
            link.addEventListener('click', () => {
                navMenu.classList.remove('active');
            });
        });
        
        // Application Modal Functionality
        const applyNowBtn = document.getElementById('applyNowBtn');
        const heroApplyBtn = document.getElementById('heroApplyBtn');
        const aboutApplyBtn = document.getElementById('aboutApplyBtn');
        const programApplyBtns = document.querySelectorAll('.program-apply-btn');
        const applicationModal = document.getElementById('applicationModal');
        const closeModal = document.getElementById('closeModal');
        const applicationForm = document.getElementById('applicationForm');
        const successMessage = document.getElementById('successMessage');
        const referenceNumber = document.getElementById('referenceNumber');
        const newApplicationBtn = document.getElementById('newApplicationBtn');
        
        // Open modal when any Apply Now button is clicked
        function openApplicationModal() {
            applicationModal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }
        
        applyNowBtn.addEventListener('click', (e) => {
            e.preventDefault();
            openApplicationModal();
        });
        
        heroApplyBtn.addEventListener('click', (e) => {
            e.preventDefault();
            openApplicationModal();
        });
        
        aboutApplyBtn.addEventListener('click', (e) => {
            e.preventDefault();
            openApplicationModal();
        });
        
        programApplyBtns.forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.preventDefault();
                openApplicationModal();
            });
        });
        
        // Close modal
        closeModal.addEventListener('click', () => {
            applicationModal.style.display = 'none';
            document.body.style.overflow = 'auto';
        });
        
        // Close modal when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === applicationModal) {
                applicationModal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        });
        
        // Handle form submission - SUBMIT TO CLOUD
        applicationForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = {
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                birthDate: document.getElementById('birthDate').value,
                grade: document.getElementById('grade').value,
                currentSchool: document.getElementById('currentSchool').value,
                parentName: document.getElementById('parentName').value,
                parentEmail: document.getElementById('parentEmail').value,
                parentPhone: document.getElementById('parentPhone').value,
                address: document.getElementById('address').value,
                interests: document.getElementById('interests').value,
                additionalInfo: document.getElementById('additionalInfo').value
            };
            
            // Show loading state
            const submitBtn = applicationForm.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Submitting to Cloud...';
            submitBtn.disabled = true;
            
            try {
                // Submit to CLOUD database
                const result = await cloudDB.submitApplication(formData);
                
                if (result.success) {
                    const savedApp = result.data.applications[result.data.applications.length - 1];
                    
                    // Show success message
                    referenceNumber.textContent = savedApp.reference;
                    applicationForm.style.display = 'none';
                    successMessage.style.display = 'block';
                    
                    // If headmaster is logged in, refresh their view
                    if (auth.isAuthenticated) {
                        await loadApplicationsFromCloud();
                    }
                } else {
                    alert('Failed to submit application. Please try again.');
                }
            } catch (error) {
                console.error('Submission error:', error);
                alert('Network error. Please check your connection and try again.');
            } finally {
                // Reset button
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            }
        });
        
        // Reset form for new application
        newApplicationBtn.addEventListener('click', () => {
            applicationForm.reset();
            applicationForm.style.display = 'block';
            successMessage.style.display = 'none';
        });
        
        // Login Modal Functionality
        const adminLoginBtn = document.getElementById('adminLoginBtn');
        const loginModal = document.getElementById('loginModal');
        const closeLoginModal = document.getElementById('closeLoginModal');
        const loginForm = document.getElementById('loginForm');
        const loginError = document.getElementById('loginError');
        
        adminLoginBtn.addEventListener('click', (e) => {
            e.preventDefault();
            loginModal.style.display = 'block';
            document.body.style.overflow = 'hidden';
            loginError.style.display = 'none';
        });
        
        closeLoginModal.addEventListener('click', () => {
            loginModal.style.display = 'none';
            document.body.style.overflow = 'auto';
        });
        
        // Login form submission
        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if (auth.login(username, password)) {
                loginModal.style.display = 'none';
                document.body.style.overflow = 'auto';
                await showAdminPanel();
            } else {
                loginError.style.display = 'block';
            }
        });
        
        // Admin Panel Functionality
        const adminSection = document.getElementById('admin');
        const refreshApplications = document.getElementById('refreshApplications');
        const exportApplications = document.getElementById('exportApplications');
        const logoutBtn = document.getElementById('logoutBtn');
        const adminWelcome = document.getElementById('adminWelcome');
        
        // Application Details Modal
        const applicationDetailsModal = document.getElementById('applicationDetailsModal');
        const closeDetailsModal = document.getElementById('closeDetailsModal');
        
        async function showAdminPanel() {
            adminSection.style.display = 'block';
            const username = auth.getCurrentUser();
            adminWelcome.textContent = `Welcome, ${username || 'Headmaster'}`;
            await loadApplicationsFromCloud();
            startAutoRefresh();
            adminSection.scrollIntoView({ behavior: 'smooth' });
        }
        
        function hideAdminPanel() {
            adminSection.style.display = 'none';
            stopAutoRefresh();
        }
        
        // Show admin panel if already authenticated
        if (auth.isAuthenticated) {
            showAdminPanel();
        }
        
        refreshApplications.addEventListener('click', async () => {
            await loadApplicationsFromCloud();
        });
        
        exportApplications.addEventListener('click', async () => {
            const csvData = await cloudDB.exportApplicationsToCSV();
            if (csvData) {
                const blob = new Blob([csvData], { type: 'text/csv' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `tuba-applications-${new Date().toISOString().split('T')[0]}.csv`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
            } else {
                alert('No applications to export.');
            }
        });
        
        logoutBtn.addEventListener('click', () => {
            auth.logout();
            hideAdminPanel();
        });
        
        // Application Details Modal
        closeDetailsModal.addEventListener('click', () => {
            applicationDetailsModal.style.display = 'none';
            document.body.style.overflow = 'auto';
        });
        
        // Contact Form Functionality
        const contactForm = document.getElementById('contactForm');
        const contactSuccessMessage = document.getElementById('contactSuccessMessage');
        
        contactForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const contactData = {
                name: document.getElementById('contactName').value,
                email: document.getElementById('contactEmail').value,
                subject: document.getElementById('contactSubject').value,
                message: document.getElementById('contactMessage').value
            };
            
            // Save contact message to CLOUD database
            await cloudDB.submitContactMessage(contactData);
            
            // Show success message and hide form
            contactForm.style.display = 'none';
            contactSuccessMessage.style.display = 'block';
            
            // Reset form after 5 seconds
            setTimeout(() => {
                contactForm.reset();
                contactForm.style.display = 'block';
                contactSuccessMessage.style.display = 'none';
            }, 5000);
        });
        
        // Auto-refresh for admin panel
        let autoRefreshInterval;

        function startAutoRefresh() {
            autoRefreshInterval = setInterval(async () => {
                if (auth.isAuthenticated && document.getElementById('admin').style.display !== 'none') {
                    await loadApplicationsFromCloud();
                }
            }, 10000); // Refresh every 10 seconds
        }

        function stopAutoRefresh() {
            if (autoRefreshInterval) {
                clearInterval(autoRefreshInterval);
            }
        }

        // Smooth Scrolling for Anchor Links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href');
                if(targetId === '#') return;
                
                const targetElement = document.querySelector(targetId);
                if(targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 70,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Make functions global for onclick handlers
        window.updateApplicationStatus = updateApplicationStatus;
        window.viewApplicationDetails = viewApplicationDetails;
    </script>
</body>
</html>
